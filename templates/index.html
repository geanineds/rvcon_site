<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>RVcon Construção Civil</title>
    <link rel="stylesheet" href="/static/style.css" />
</head>

<body>
    <header class="topo-fixo">
        <div class="container-header">

            <img class="logo" src="/static/img/logo.png" alt="Logo RVcon">

            <nav class="nav-top">
                <a href="#home" class="nav-item">Início</a>
                <a href="#servicos" class="nav-item">Serviços</a>
                <a href="#projetos" class="nav-item">Projetos</a>
                <a href="#orcamento" class="nav-item">Orçamento</a>
            </nav>

            <!-- BOTÃO WHATSAPP COM REDIRECIONAMENTO -->
            <a class="btn-whatsapp"
               id="btnWhats"
               href="https://wa.me/5541991194424?text=Olá!%20Vim%20pelo%20site%20da%20RVCon%20e%20gostaria%20de%20mais%20informações."
               target="_blank"
               title="Entrar em contato">

                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M20.52 3.48A11.87 11.87 0 0 0 12 0C5.372 0 .036 5.336.036 12c0 2.112.568 4.176 1.648 5.976L0 24l6.288-1.612A11.897 11.897 0 0 0 12 24c6.628 0 11.964-5.336 11.964-12 0-1.996-.444-3.888-1.444-5.52z" fill="#075E54"/>
                    <path d="M17.73 14.18c-.28-.14-1.66-.82-1.92-.92-.26-.1-.45-.14-.64.14-.2.28-.78.92-.96 1.12-.18.2-.36.25-.66.09-.3-.16-1.28-.47-2.44-1.5-.9-.8-1.5-1.78-1.68-2.08-.18-.3-.02-.46.14-.6.14-.14.3-.36.46-.54.16-.18.22-.3.36-.5.14-.2.06-.38-.03-.54-.09-.16-.64-1.54-.88-2.12-.22-.55-.44-.48-.64-.48-.16 0-.36-.02-.56-.02-.18 0-.5.07-.76.36-.26.3-.98.96-.98 2.34 0 1.38 1.01 2.72 1.15 2.9.14.18 1.98 3.04 4.8 4.36 1.06.46 1.89.74 2.54.95.7.22 1.34.19 1.84.12.56-.08 1.66-.68 1.9-1.33.24-.64.24-1.18.17-1.33-.07-.15-.26-.24-.54-.38z" fill="#fff"/>
                </svg>

                Entrar em contato
            </a>

        </div>
    </header>

    <main id="home">
        <section class="hero">
            <div class="hero-inner container">
                <div class="hero-text">
                    <h1>RVcon Construção Civil</h1>
                    <p>Projetos, reformas e acabamentos com qualidade, prazo e segurança.</p>
                    <div class="hero-ctas">
                        <a class="cta-primary" href="#orcamento">Solicitar orçamento</a>
                        <a class="cta-secondary" href="#projetos">Ver projetos</a>
                    </div>
                </div>
                <div class="hero-visual" role="img" aria-hidden="true"></div>
            </div>
        </section>

        <section id="servicos" class="servicos container">
            <h2>Nossos serviços</h2>
            <div class="grid-cards">
                <article class="card">
                    <h3>Construção</h3>
                    <p>Obras residenciais e comerciais com gestão completa.</p>
                </article>

                <article class="card">
                    <h3>Acabamentos</h3>
                    <p>Pintura, revestimento, gesso e detalhes finais.</p>
                </article>

                <article class="card">
                    <h3>Alvenaria</h3>
                    <p>Levantamento de paredes, reforços e regularizações.</p>
                </article>

                <article class="card">
                    <h3>Manutenção</h3>
                    <p>Pequenas obras, reparos e manutenção preventiva.</p>
                </article>
            </div>
        </section>

        <section id="projetos" class="projetos container">
            <h2>Projetos recentes</h2>
            <div class="projects">
                <div class="project"></div>
                <div class="project"></div>
                <div class="project"></div>
            </div>
        </section>

        <section id="orcamento" class="orcamento container">
            <div class="form-area">
                <h2>Solicitar orçamento</h2>
                <form id="formOrcamento">
                    <input type="text" name="nome" placeholder="Seu nome" required>
                    <input type="text" name="telefone" placeholder="Telefone (WhatsApp)" required>
                    <input type="text" name="servico" placeholder="Serviço desejado" required>
                    <textarea name="descricao" placeholder="Descreva seu pedido" required></textarea>
                    <button type="submit" class="btn-submit">Enviar para WhatsApp</button>
                </form>
            </div>

            <aside class="chat-area">
                <h3>Assistente RVcon</h3>
                <div id="chat"></div>
                <div class="chat-input">
                    <input id="mensagem" type="text" placeholder="Digite sua mensagem">
                    <button onclick="enviarMensagem()" class="btn-chat">Enviar</button>
                </div>
            </aside>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container-footer">
            <div>Rvcon Construção Civil LTDA — CNPJ 61.218.373/0001-28</div>
            <div>Fundada em 09/06/2025</div>
        </div>
    </footer>

    <script>
        function enviarMensagem() {
            const msg = document.getElementById("mensagem").value.trim();
            if (!msg) return;

            fetch("/send_message", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({message: msg})
            })
            .then(r => r.json())
            .then(data => {
                const chat = document.getElementById("chat");
                const you = document.createElement("div");
                you.className = 'chat-you';
                you.textContent = 'Você: ' + msg;

                const bot = document.createElement("div");
                bot.className = 'chat-bot';
                bot.textContent = 'Bot: ' + data.answer;

                chat.appendChild(you);
                chat.appendChild(bot);
                chat.scrollTop = chat.scrollHeight;

                document.getElementById("mensagem").value = '';
            });
        }

        document.getElementById("formOrcamento").addEventListener("submit", function(e){
            e.preventDefault();
            const form = new FormData(this);

            fetch("/whatsapp", { method: "POST", body: form })
            .then(r => r.json())
            .then(data => {
                window.open(data.link, "_blank");
            });
        });

        document.querySelectorAll('a[href^="#"]').forEach(a => {
            a.addEventListener('click', function(e){
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    e.preventDefault();
                    target.scrollIntoView({behavior:'smooth', block:'start'});
                }
            });
        });
    </script>

</body>
</html>
